(function(){var Byte,Client,Frame,Stomp,__hasProp={}.hasOwnProperty,__slice=[].slice;Byte={LF:"\n",NULL:"\x00"},Frame=function(){function Frame(command,headers,body){this.command=command,this.headers=null!=headers?headers:{},this.body=null!=body?body:""}var unmarshallSingle;return Frame.prototype.toString=function(){var lines,name,value,_ref;lines=[this.command],_ref=this.headers;for(name in _ref)__hasProp.call(_ref,name)&&(value=_ref[name],lines.push(""+name+":"+value));return this.body&&lines.push("content-length:"+Frame.sizeOfUTF8(this.body)),lines.push(Byte.LF+this.body),lines.join(Byte.LF)},Frame.sizeOfUTF8=function(s){return s?encodeURI(s).split(/%..|./).length-1:0},unmarshallSingle=function(data){var body,chr,command,divider,headerLines,headers,i,idx,len,line,start,trim,_i,_j,_len,_ref,_ref1;for(divider=data.search(RegExp(""+Byte.LF+Byte.LF)),headerLines=data.substring(0,divider).split(Byte.LF),command=headerLines.shift(),headers={},trim=function(str){return str.replace(/^\s+|\s+$/g,"")},_ref=headerLines.reverse(),_i=0,_len=_ref.length;_len>_i;_i++)line=_ref[_i],idx=line.indexOf(":"),headers[trim(line.substring(0,idx))]=trim(line.substring(idx+1));if(body="",start=divider+2,headers["content-length"])len=parseInt(headers["content-length"]),body=(""+data).substring(start,start+len);else for(chr=null,i=_j=start,_ref1=data.length;(_ref1>=start?_ref1>_j:_j>_ref1)&&(chr=data.charAt(i),chr!==Byte.NULL);i=_ref1>=start?++_j:--_j)body+=chr;return new Frame(command,headers,body)},Frame.unmarshall=function(datas){var data;return function(){var _i,_len,_ref,_results;for(_ref=datas.split(RegExp(""+Byte.NULL+Byte.LF+"*")),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)data=_ref[_i],(null!=data?data.length:void 0)>0&&_results.push(unmarshallSingle(data));return _results}()},Frame.marshall=function(command,headers,body){var frame;return frame=new Frame(command,headers,body),frame.toString()+Byte.NULL},Frame}(),Client=function(){function Client(ws){this.ws=ws,this.ws.binaryType="arraybuffer",this.counter=0,this.connected=!1,this.heartbeat={outgoing:1e4,incoming:1e4},this.maxWebSocketFrameSize=16384,this.subscriptions={}}var now;return Client.prototype.debug=function(message){var _ref;return"undefined"!=typeof window&&null!==window&&null!=(_ref=window.console)?_ref.log(message):void 0},now=function(){return Date.now||(new Date).valueOf},Client.prototype._transmit=function(command,headers,body){var out;for(out=Frame.marshall(command,headers,body),"function"==typeof this.debug&&this.debug(">>> "+out);;){if(!(out.length>this.maxWebSocketFrameSize))return this.ws.send(out);this.ws.send(out.substring(0,this.maxWebSocketFrameSize)),out=out.substring(this.maxWebSocketFrameSize),"function"==typeof this.debug&&this.debug("remaining = "+out.length)}},Client.prototype._setupHeartbeat=function(headers){var serverIncoming,serverOutgoing,ttl,v,_ref,_ref1;if((_ref=headers.version)===Stomp.VERSIONS.V1_1||_ref===Stomp.VERSIONS.V1_2)return _ref1=function(){var _i,_len,_ref1,_results;for(_ref1=headers["heart-beat"].split(","),_results=[],_i=0,_len=_ref1.length;_len>_i;_i++)v=_ref1[_i],_results.push(parseInt(v));return _results}(),serverOutgoing=_ref1[0],serverIncoming=_ref1[1],0!==this.heartbeat.outgoing&&0!==serverIncoming&&(ttl=Math.max(this.heartbeat.outgoing,serverIncoming),"function"==typeof this.debug&&this.debug("send PING every "+ttl+"ms"),this.pinger=Stomp.setInterval(ttl,function(_this){return function(){return _this.ws.send(Byte.LF),"function"==typeof _this.debug?_this.debug(">>> PING"):void 0}}(this))),0!==this.heartbeat.incoming&&0!==serverOutgoing?(ttl=Math.max(this.heartbeat.incoming,serverOutgoing),"function"==typeof this.debug&&this.debug("check PONG every "+ttl+"ms"),this.ponger=Stomp.setInterval(ttl,function(_this){return function(){var delta;return delta=now()-_this.serverActivity,delta>2*ttl?("function"==typeof _this.debug&&_this.debug("did not receive server activity for the last "+delta+"ms"),_this.ws.close()):void 0}}(this))):void 0},Client.prototype._parseConnect=function(){var args,connectCallback,errorCallback,headers;switch(args=1<=arguments.length?__slice.call(arguments,0):[],headers={},args.length){case 2:headers=args[0],connectCallback=args[1];break;case 3:args[1]instanceof Function?(headers=args[0],connectCallback=args[1],errorCallback=args[2]):(headers.login=args[0],headers.passcode=args[1],connectCallback=args[2]);break;case 4:headers.login=args[0],headers.passcode=args[1],connectCallback=args[2],errorCallback=args[3];break;default:headers.login=args[0],headers.passcode=args[1],connectCallback=args[2],errorCallback=args[3],headers.host=args[4]}return[headers,connectCallback,errorCallback]},Client.prototype.connect=function(){var args,errorCallback,headers,out;return args=1<=arguments.length?__slice.call(arguments,0):[],out=this._parseConnect.apply(this,args),headers=out[0],this.connectCallback=out[1],errorCallback=out[2],"function"==typeof this.debug&&this.debug("Opening Web Socket..."),this.ws.onmessage=function(_this){return function(evt){var arr,c,client,data,frame,messageID,onreceive,subscription,_i,_len,_ref,_results;if(data="undefined"!=typeof ArrayBuffer&&evt.data instanceof ArrayBuffer?(arr=new Uint8Array(evt.data),"function"==typeof _this.debug?_this.debug("--- got data length: "+arr.length):void 0,function(){var _i,_len,_results;for(_results=[],_i=0,_len=arr.length;_len>_i;_i++)c=arr[_i],_results.push(String.fromCharCode(c));return _results}().join("")):evt.data,_this.serverActivity=now(),data===Byte.LF)return void("function"==typeof _this.debug&&_this.debug("<<< PONG"));for("function"==typeof _this.debug&&_this.debug("<<< "+data),_ref=Frame.unmarshall(data),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)switch(frame=_ref[_i],frame.command){case"CONNECTED":"function"==typeof _this.debug&&_this.debug("connected to server "+frame.headers.server),_this.connected=!0,_this._setupHeartbeat(frame.headers),_results.push("function"==typeof _this.connectCallback?_this.connectCallback(frame):void 0);break;case"MESSAGE":subscription=frame.headers.subscription,onreceive=_this.subscriptions[subscription]||_this.onreceive,onreceive?(client=_this,messageID=frame.headers["message-id"],frame.ack=function(headers){return null==headers&&(headers={}),client.ack(messageID,subscription,headers)},frame.nack=function(headers){return null==headers&&(headers={}),client.nack(messageID,subscription,headers)},_results.push(onreceive(frame))):_results.push("function"==typeof _this.debug?_this.debug("Unhandled received MESSAGE: "+frame):void 0);break;case"RECEIPT":_results.push("function"==typeof _this.onreceipt?_this.onreceipt(frame):void 0);break;case"ERROR":_results.push("function"==typeof errorCallback?errorCallback(frame):void 0);break;default:_results.push("function"==typeof _this.debug?_this.debug("Unhandled frame: "+frame):void 0)}return _results}}(this),this.ws.onclose=function(_this){return function(){var msg;return msg="Whoops! Lost connection to "+_this.ws.url,"function"==typeof _this.debug&&_this.debug(msg),_this._cleanUp(),"function"==typeof errorCallback?errorCallback(msg):void 0}}(this),this.ws.onopen=function(_this){return function(){return"function"==typeof _this.debug&&_this.debug("Web Socket Opened..."),headers["accept-version"]=Stomp.VERSIONS.supportedVersions(),headers["heart-beat"]=[_this.heartbeat.outgoing,_this.heartbeat.incoming].join(","),_this._transmit("CONNECT",headers)}}(this)},Client.prototype.disconnect=function(disconnectCallback){return this._transmit("DISCONNECT"),this.ws.onclose=null,this.ws.close(),this._cleanUp(),"function"==typeof disconnectCallback?disconnectCallback():void 0},Client.prototype._cleanUp=function(){return this.connected=!1,this.pinger&&Stomp.clearInterval(this.pinger),this.ponger?Stomp.clearInterval(this.ponger):void 0},Client.prototype.send=function(destination,headers,body){return null==headers&&(headers={}),null==body&&(body=""),headers.destination=destination,this._transmit("SEND",headers,body)},Client.prototype.subscribe=function(destination,callback,headers){var client;return null==headers&&(headers={}),headers.id||(headers.id="sub-"+this.counter++),headers.destination=destination,this.subscriptions[headers.id]=callback,this._transmit("SUBSCRIBE",headers),client=this,{id:headers.id,unsubscribe:function(){return client.unsubscribe(headers.id)}}},Client.prototype.unsubscribe=function(id){return delete this.subscriptions[id],this._transmit("UNSUBSCRIBE",{id:id})},Client.prototype.begin=function(transaction){var client,txid;return txid=transaction||"tx-"+this.counter++,this._transmit("BEGIN",{transaction:txid}),client=this,{id:txid,commit:function(){return client.commit(txid)},abort:function(){return client.abort(txid)}}},Client.prototype.commit=function(transaction){return this._transmit("COMMIT",{transaction:transaction})},Client.prototype.abort=function(transaction){return this._transmit("ABORT",{transaction:transaction})},Client.prototype.ack=function(messageID,subscription,headers){return null==headers&&(headers={}),headers["message-id"]=messageID,headers.subscription=subscription,this._transmit("ACK",headers)},Client.prototype.nack=function(messageID,subscription,headers){return null==headers&&(headers={}),headers["message-id"]=messageID,headers.subscription=subscription,this._transmit("NACK",headers)},Client}(),Stomp={VERSIONS:{V1_0:"1.0",V1_1:"1.1",V1_2:"1.2",supportedVersions:function(){return"1.1,1.0"}},client:function(url,protocols){var klass,ws;return null==protocols&&(protocols=["v10.stomp","v11.stomp"]),klass=Stomp.WebSocketClass||WebSocket,ws=new klass(url,protocols),new Client(ws)},over:function(ws){return new Client(ws)},Frame:Frame},"undefined"!=typeof window&&null!==window?(Stomp.setInterval=function(interval,f){return window.setInterval(f,interval)},Stomp.clearInterval=function(id){return window.clearInterval(id)},window.Stomp=Stomp):"undefined"!=typeof exports&&null!==exports?exports.Stomp=Stomp:self.Stomp=Stomp}).call(this);var JSON;JSON||(JSON={}),function(){function str(a,b){var c,d,e,f,h,g=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,h=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)h[c]=str(c,i)||"null";return e=0===h.length?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]",gap=g,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&h.push(quote(d)+(gap?": ":":")+e));return e=0===h.length?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}",gap=g,e}}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function f(a){return 10>a?"0"+a:a}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,!b||"function"==typeof b||"object"==typeof b&&"number"==typeof b.length)return str("",{"":a});throw new Error("JSON.stringify")}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),void 0!==d?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),SockJS=function(){var _document=document,_window=window,utils={},REventTarget=function(){};REventTarget.prototype.addEventListener=function(eventType,listener){this._listeners||(this._listeners={}),eventType in this._listeners||(this._listeners[eventType]=[]);var arr=this._listeners[eventType];-1===utils.arrIndexOf(arr,listener)&&arr.push(listener)},REventTarget.prototype.removeEventListener=function(eventType,listener){if(this._listeners&&eventType in this._listeners){var arr=this._listeners[eventType],idx=utils.arrIndexOf(arr,listener);return-1!==idx?void(arr.length>1?this._listeners[eventType]=arr.slice(0,idx).concat(arr.slice(idx+1)):delete this._listeners[eventType]):void 0}},REventTarget.prototype.dispatchEvent=function(event){var t=event.type,args=Array.prototype.slice.call(arguments,0);if(this["on"+t]&&this["on"+t].apply(this,args),this._listeners&&t in this._listeners)for(var i=0;i<this._listeners[t].length;i++)this._listeners[t][i].apply(this,args)};var SimpleEvent=function(type,obj){if(this.type=type,"undefined"!=typeof obj)for(var k in obj)obj.hasOwnProperty(k)&&(this[k]=obj[k])};SimpleEvent.prototype.toString=function(){var r=[];for(var k in this)if(this.hasOwnProperty(k)){var v=this[k];"function"==typeof v&&(v="[function]"),r.push(k+"="+v)}return"SimpleEvent("+r.join(", ")+")"};var EventEmitter=function(events){var that=this;that._events=events||[],that._listeners={}};EventEmitter.prototype.emit=function(type){var that=this;if(that._verifyType(type),!that._nuked){var args=Array.prototype.slice.call(arguments,1);if(that["on"+type]&&that["on"+type].apply(that,args),type in that._listeners)for(var i=0;i<that._listeners[type].length;i++)that._listeners[type][i].apply(that,args)}},EventEmitter.prototype.on=function(type,callback){var that=this;that._verifyType(type),that._nuked||(type in that._listeners||(that._listeners[type]=[]),that._listeners[type].push(callback))},EventEmitter.prototype._verifyType=function(type){var that=this;-1===utils.arrIndexOf(that._events,type)&&utils.log("Event "+JSON.stringify(type)+" not listed "+JSON.stringify(that._events)+" in "+that)},EventEmitter.prototype.nuke=function(){var that=this;that._nuked=!0;for(var i=0;i<that._events.length;i++)delete that[that._events[i]];that._listeners={}};var random_string_chars="abcdefghijklmnopqrstuvwxyz0123456789_";utils.random_string=function(length,max){max=max||random_string_chars.length;var i,ret=[];for(i=0;length>i;i++)ret.push(random_string_chars.substr(Math.floor(Math.random()*max),1));return ret.join("")},utils.random_number=function(max){return Math.floor(Math.random()*max)},utils.random_number_string=function(max){var t=(""+(max-1)).length,p=Array(t+1).join("0");return(p+utils.random_number(max)).slice(-t)},utils.getOrigin=function(url){url+="/";var parts=url.split("/").slice(0,3);return parts.join("/")},utils.isSameOriginUrl=function(url_a,url_b){return url_b||(url_b=_window.location.href),url_a.split("/").slice(0,3).join("/")===url_b.split("/").slice(0,3).join("/")},utils.getParentDomain=function(url){if(/^[0-9.]*$/.test(url))return url;if(/^\[/.test(url))return url;if(!/[.]/.test(url))return url;var parts=url.split(".").slice(1);return parts.join(".")},utils.objectExtend=function(dst,src){for(var k in src)src.hasOwnProperty(k)&&(dst[k]=src[k]);return dst};var WPrefix="_jp";utils.polluteGlobalNamespace=function(){WPrefix in _window||(_window[WPrefix]={})},utils.closeFrame=function(code,reason){return"c"+JSON.stringify([code,reason])},utils.userSetCode=function(code){return 1e3===code||code>=3e3&&4999>=code},utils.countRTO=function(rtt){var rto;return rto=rtt>100?3*rtt:rtt+200},utils.log=function(){_window.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},utils.bind=function(fun,that){return fun.bind?fun.bind(that):function(){return fun.apply(that,arguments)}},utils.flatUrl=function(url){return-1===url.indexOf("?")&&-1===url.indexOf("#")},utils.amendUrl=function(url){var dl=_document.location;if(!url)throw new Error("Wrong url for SockJS");if(!utils.flatUrl(url))throw new Error("Only basic urls are supported in SockJS");return 0===url.indexOf("//")&&(url=dl.protocol+url),0===url.indexOf("/")&&(url=dl.protocol+"//"+dl.host+url),url=url.replace(/[/]+$/,"")},utils.arrIndexOf=function(arr,obj){for(var i=0;i<arr.length;i++)if(arr[i]===obj)return i;return-1},utils.arrSkip=function(arr,obj){var idx=utils.arrIndexOf(arr,obj);if(-1===idx)return arr.slice();var dst=arr.slice(0,idx);return dst.concat(arr.slice(idx+1))},utils.isArray=Array.isArray||function(value){return{}.toString.call(value).indexOf("Array")>=0},utils.delay=function(t,fun){return"function"==typeof t&&(fun=t,t=0),setTimeout(fun,t)};var extra_lookup,json_escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,json_lookup={"\x00":"\\u0000","":"\\u0001","":"\\u0002","":"\\u0003","":"\\u0004","":"\\u0005","":"\\u0006","":"\\u0007","\b":"\\b","	":"\\t","\n":"\\n","":"\\u000b","\f":"\\f","\r":"\\r","":"\\u000e","":"\\u000f","":"\\u0010","":"\\u0011","":"\\u0012","":"\\u0013","":"\\u0014","":"\\u0015","":"\\u0016","":"\\u0017","":"\\u0018","":"\\u0019","":"\\u001a","":"\\u001b","":"\\u001c","":"\\u001d","":"\\u001e","":"\\u001f",'"':'\\"',"\\":"\\\\","":"\\u007f","Â€":"\\u0080","Â":"\\u0081","Â‚":"\\u0082","Âƒ":"\\u0083","Â„":"\\u0084","Â…":"\\u0085","Â†":"\\u0086","Â‡":"\\u0087","Âˆ":"\\u0088","Â‰":"\\u0089","ÂŠ":"\\u008a","Â‹":"\\u008b","ÂŒ":"\\u008c","Â":"\\u008d","ÂŽ":"\\u008e","Â":"\\u008f","Â":"\\u0090","Â‘":"\\u0091","Â’":"\\u0092","Â“":"\\u0093","Â”":"\\u0094","Â•":"\\u0095","Â–":"\\u0096","Â—":"\\u0097","Â˜":"\\u0098","Â™":"\\u0099","Âš":"\\u009a","Â›":"\\u009b","Âœ":"\\u009c","Â":"\\u009d","Âž":"\\u009e","ÂŸ":"\\u009f","Â­":"\\u00ad","Ø€":"\\u0600","Ø":"\\u0601","Ø‚":"\\u0602","Øƒ":"\\u0603","Ø„":"\\u0604","Ü":"\\u070f","áž´":"\\u17b4","ážµ":"\\u17b5","â€Œ":"\\u200c","â€":"\\u200d","â€Ž":"\\u200e","â€":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","â€ª":"\\u202a","â€«":"\\u202b","â€¬":"\\u202c","â€­":"\\u202d","â€®":"\\u202e","â€¯":"\\u202f","â ":"\\u2060","â¡":"\\u2061","â¢":"\\u2062","â£":"\\u2063","â¤":"\\u2064","â¥":"\\u2065","â¦":"\\u2066","â§":"\\u2067","â¨":"\\u2068","â©":"\\u2069","âª":"\\u206a","â«":"\\u206b","â¬":"\\u206c","â­":"\\u206d","â®":"\\u206e","â¯":"\\u206f","ï»¿":"\\ufeff","ï¿°":"\\ufff0","ï¿±":"\\ufff1","ï¿²":"\\ufff2","ï¿³":"\\ufff3","ï¿´":"\\ufff4","ï¿µ":"\\ufff5","ï¿¶":"\\ufff6","ï¿·":"\\ufff7","ï¿¸":"\\ufff8","ï¿¹":"\\ufff9","ï¿º":"\\ufffa","ï¿»":"\\ufffb","ï¿¼":"\\ufffc","ï¿½":"\\ufffd","ï¿¾":"\\ufffe","ï¿¿":"\\uffff"},extra_escapable=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,JSONQuote=JSON&&JSON.stringify||function(string){return json_escapable.lastIndex=0,json_escapable.test(string)&&(string=string.replace(json_escapable,function(a){return json_lookup[a]})),'"'+string+'"'},unroll_lookup=function(escapable){var i,unrolled={},c=[];for(i=0;65536>i;i++)c.push(String.fromCharCode(i));return escapable.lastIndex=0,c.join("").replace(escapable,function(a){return unrolled[a]="\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4),""}),escapable.lastIndex=0,unrolled};utils.quote=function(string){var quoted=JSONQuote(string);return extra_escapable.lastIndex=0,extra_escapable.test(quoted)?(extra_lookup||(extra_lookup=unroll_lookup(extra_escapable)),quoted.replace(extra_escapable,function(a){return extra_lookup[a]})):quoted};var _all_protocols=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];utils.probeProtocols=function(){for(var probed={},i=0;i<_all_protocols.length;i++){var protocol=_all_protocols[i];probed[protocol]=SockJS[protocol]&&SockJS[protocol].enabled()}return probed},utils.detectProtocols=function(probed,protocols_whitelist,info){var pe={},protocols=[];protocols_whitelist||(protocols_whitelist=_all_protocols);for(var i=0;i<protocols_whitelist.length;i++){var protocol=protocols_whitelist[i];pe[protocol]=probed[protocol]}var maybe_push=function(protos){var proto=protos.shift();pe[proto]?protocols.push(proto):protos.length>0&&maybe_push(protos)};return info.websocket!==!1&&maybe_push(["websocket"]),pe["xhr-streaming"]&&!info.null_origin?protocols.push("xhr-streaming"):!pe["xdr-streaming"]||info.cookie_needed||info.null_origin?maybe_push(["iframe-eventsource","iframe-htmlfile"]):protocols.push("xdr-streaming"),pe["xhr-polling"]&&!info.null_origin?protocols.push("xhr-polling"):!pe["xdr-polling"]||info.cookie_needed||info.null_origin?maybe_push(["iframe-xhr-polling","jsonp-polling"]):protocols.push("xdr-polling"),protocols};var MPrefix="_sockjs_global";utils.createHook=function(){var window_id="a"+utils.random_string(8);if(!(MPrefix in _window)){var map={};_window[MPrefix]=function(window_id){return window_id in map||(map[window_id]={id:window_id,del:function(){delete map[window_id]}}),map[window_id]}}return _window[MPrefix](window_id)},utils.attachMessage=function(listener){utils.attachEvent("message",listener)},utils.attachEvent=function(event,listener){"undefined"!=typeof _window.addEventListener?_window.addEventListener(event,listener,!1):(_document.attachEvent("on"+event,listener),_window.attachEvent("on"+event,listener))},utils.detachMessage=function(listener){utils.detachEvent("message",listener)},utils.detachEvent=function(event,listener){"undefined"!=typeof _window.addEventListener?_window.removeEventListener(event,listener,!1):(_document.detachEvent("on"+event,listener),_window.detachEvent("on"+event,listener))};var on_unload={},after_unload=!1,trigger_unload_callbacks=function(){for(var ref in on_unload)on_unload[ref](),delete on_unload[ref]},unload_triggered=function(){after_unload||(after_unload=!0,trigger_unload_callbacks())};utils.attachEvent("unload",unload_triggered),utils.unload_add=function(listener){var ref=utils.random_string(8);return on_unload[ref]=listener,after_unload&&utils.delay(trigger_unload_callbacks),ref},utils.unload_del=function(ref){ref in on_unload&&delete on_unload[ref]},utils.createIframe=function(iframe_url,error_callback){var tref,unload_ref,iframe=_document.createElement("iframe"),unattach=function(){clearTimeout(tref);try{iframe.onload=null}catch(x){}iframe.onerror=null},cleanup=function(){iframe&&(unattach(),setTimeout(function(){iframe&&iframe.parentNode.removeChild(iframe),iframe=null},0),utils.unload_del(unload_ref))},onerror=function(r){iframe&&(cleanup(),error_callback(r))},post=function(msg,origin){try{iframe&&iframe.contentWindow&&iframe.contentWindow.postMessage(msg,origin)}catch(x){}};return iframe.src=iframe_url,iframe.style.display="none",iframe.style.position="absolute",iframe.onerror=function(){onerror("onerror")},iframe.onload=function(){clearTimeout(tref),tref=setTimeout(function(){onerror("onload timeout")},2e3)},_document.body.appendChild(iframe),tref=setTimeout(function(){onerror("timeout")},15e3),unload_ref=utils.unload_add(cleanup),{post:post,cleanup:cleanup,loaded:unattach}},utils.createHtmlfile=function(iframe_url,error_callback){var tref,unload_ref,iframe,doc=new ActiveXObject("htmlfile"),unattach=function(){clearTimeout(tref)},cleanup=function(){doc&&(unattach(),utils.unload_del(unload_ref),iframe.parentNode.removeChild(iframe),iframe=doc=null,CollectGarbage())},onerror=function(r){doc&&(cleanup(),error_callback(r))},post=function(msg,origin){try{iframe&&iframe.contentWindow&&iframe.contentWindow.postMessage(msg,origin)}catch(x){}};doc.open(),doc.write('<html><script>document.domain="'+document.domain+'";</script></html>'),doc.close(),doc.parentWindow[WPrefix]=_window[WPrefix];var c=doc.createElement("div");return doc.body.appendChild(c),iframe=doc.createElement("iframe"),c.appendChild(iframe),iframe.src=iframe_url,tref=setTimeout(function(){onerror("timeout")},15e3),unload_ref=utils.unload_add(cleanup),{post:post,cleanup:cleanup,loaded:unattach}};var AbstractXHRObject=function(){};AbstractXHRObject.prototype=new EventEmitter(["chunk","finish"]),AbstractXHRObject.prototype._start=function(method,url,payload,opts){var that=this;try{that.xhr=new XMLHttpRequest}catch(x){}if(!that.xhr)try{that.xhr=new _window.ActiveXObject("Microsoft.XMLHTTP")}catch(x){}(_window.ActiveXObject||_window.XDomainRequest)&&(url+=(-1===url.indexOf("?")?"?":"&")+"t="+ +new Date),that.unload_ref=utils.unload_add(function(){that._cleanup(!0)});try{that.xhr.open(method,url,!0)}catch(e){return that.emit("finish",0,""),void that._cleanup()}if(opts&&opts.no_credentials||(that.xhr.withCredentials="true"),opts&&opts.headers)for(var key in opts.headers)that.xhr.setRequestHeader(key,opts.headers[key]);that.xhr.onreadystatechange=function(){if(that.xhr){var x=that.xhr;switch(x.readyState){case 3:try{var status=x.status,text=x.responseText}catch(x){}1223===status&&(status=204),text&&text.length>0&&that.emit("chunk",status,text);break;case 4:var status=x.status;1223===status&&(status=204),that.emit("finish",status,x.responseText),that._cleanup(!1)}}},that.xhr.send(payload)},AbstractXHRObject.prototype._cleanup=function(abort){var that=this;if(that.xhr){if(utils.unload_del(that.unload_ref),that.xhr.onreadystatechange=function(){},abort)try{that.xhr.abort()}catch(x){}that.unload_ref=that.xhr=null}},AbstractXHRObject.prototype.close=function(){var that=this;that.nuke(),that._cleanup(!0)};var XHRCorsObject=utils.XHRCorsObject=function(){var that=this,args=arguments;utils.delay(function(){that._start.apply(that,args)})};XHRCorsObject.prototype=new AbstractXHRObject;var XHRLocalObject=utils.XHRLocalObject=function(method,url,payload){var that=this;utils.delay(function(){that._start(method,url,payload,{no_credentials:!0})})};XHRLocalObject.prototype=new AbstractXHRObject;var XDRObject=utils.XDRObject=function(method,url,payload){var that=this;utils.delay(function(){that._start(method,url,payload)})};XDRObject.prototype=new EventEmitter(["chunk","finish"]),XDRObject.prototype._start=function(method,url,payload){var that=this,xdr=new XDomainRequest;url+=(-1===url.indexOf("?")?"?":"&")+"t="+ +new Date;var onerror=xdr.ontimeout=xdr.onerror=function(){that.emit("finish",0,""),that._cleanup(!1)};xdr.onprogress=function(){that.emit("chunk",200,xdr.responseText)},xdr.onload=function(){that.emit("finish",200,xdr.responseText),that._cleanup(!1)},that.xdr=xdr,that.unload_ref=utils.unload_add(function(){that._cleanup(!0)});try{that.xdr.open(method,url),that.xdr.send(payload)}catch(x){onerror()}},XDRObject.prototype._cleanup=function(abort){var that=this;if(that.xdr){if(utils.unload_del(that.unload_ref),that.xdr.ontimeout=that.xdr.onerror=that.xdr.onprogress=that.xdr.onload=null,abort)try{that.xdr.abort()}catch(x){}that.unload_ref=that.xdr=null}},XDRObject.prototype.close=function(){var that=this;that.nuke(),that._cleanup(!0)},utils.isXHRCorsCapable=function(){return _window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?1:_window.XDomainRequest&&_document.domain?2:IframeTransport.enabled()?3:4};var SockJS=function(url,dep_protocols_whitelist,options){if(this===_window)return new SockJS(url,dep_protocols_whitelist,options);var protocols_whitelist,that=this;that._options={devel:!1,debug:!1,protocols_whitelist:[],info:void 0,rtt:void 0},options&&utils.objectExtend(that._options,options),that._base_url=utils.amendUrl(url),that._server=that._options.server||utils.random_number_string(1e3),that._options.protocols_whitelist&&that._options.protocols_whitelist.length?protocols_whitelist=that._options.protocols_whitelist:(protocols_whitelist="string"==typeof dep_protocols_whitelist&&dep_protocols_whitelist.length>0?[dep_protocols_whitelist]:utils.isArray(dep_protocols_whitelist)?dep_protocols_whitelist:null,protocols_whitelist&&that._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.')),that._protocols=[],that.protocol=null,that.readyState=SockJS.CONNECTING,that._ir=createInfoReceiver(that._base_url),that._ir.onfinish=function(info,rtt){that._ir=null,info?(that._options.info&&(info=utils.objectExtend(info,that._options.info)),that._options.rtt&&(rtt=that._options.rtt),that._applyInfo(info,rtt,protocols_whitelist),that._didClose()):that._didClose(1002,"Can't connect to server",!0)}};SockJS.prototype=new REventTarget,SockJS.version="0.3.4",SockJS.CONNECTING=0,SockJS.OPEN=1,SockJS.CLOSING=2,SockJS.CLOSED=3,SockJS.prototype._debug=function(){this._options.debug&&utils.log.apply(utils,arguments)},SockJS.prototype._dispatchOpen=function(){var that=this;that.readyState===SockJS.CONNECTING?(that._transport_tref&&(clearTimeout(that._transport_tref),that._transport_tref=null),that.readyState=SockJS.OPEN,that.dispatchEvent(new SimpleEvent("open"))):that._didClose(1006,"Server lost session")},SockJS.prototype._dispatchMessage=function(data){var that=this;that.readyState===SockJS.OPEN&&that.dispatchEvent(new SimpleEvent("message",{data:data}))},SockJS.prototype._dispatchHeartbeat=function(){var that=this;that.readyState===SockJS.OPEN&&that.dispatchEvent(new SimpleEvent("heartbeat",{}))},SockJS.prototype._didClose=function(code,reason,force){var that=this;if(that.readyState!==SockJS.CONNECTING&&that.readyState!==SockJS.OPEN&&that.readyState!==SockJS.CLOSING)throw new Error("INVALID_STATE_ERR");that._ir&&(that._ir.nuke(),that._ir=null),that._transport&&(that._transport.doCleanup(),that._transport=null);var close_event=new SimpleEvent("close",{code:code,reason:reason,wasClean:utils.userSetCode(code)});if(!utils.userSetCode(code)&&that.readyState===SockJS.CONNECTING&&!force){if(that._try_next_protocol(close_event))return;close_event=new SimpleEvent("close",{code:2e3,reason:"All transports failed",wasClean:!1,last_event:close_event})}that.readyState=SockJS.CLOSED,utils.delay(function(){that.dispatchEvent(close_event)})},SockJS.prototype._didMessage=function(data){var that=this,type=data.slice(0,1);switch(type){case"o":that._dispatchOpen();break;case"a":for(var payload=JSON.parse(data.slice(1)||"[]"),i=0;i<payload.length;i++)that._dispatchMessage(payload[i]);break;case"m":var payload=JSON.parse(data.slice(1)||"null");that._dispatchMessage(payload);break;case"c":var payload=JSON.parse(data.slice(1)||"[]");
that._didClose(payload[0],payload[1]);break;case"h":that._dispatchHeartbeat()}},SockJS.prototype._try_next_protocol=function(close_event){var that=this;for(that.protocol&&(that._debug("Closed transport:",that.protocol,""+close_event),that.protocol=null),that._transport_tref&&(clearTimeout(that._transport_tref),that._transport_tref=null);;){var protocol=that.protocol=that._protocols.shift();if(!protocol)return!1;if(SockJS[protocol]&&SockJS[protocol].need_body===!0&&(!_document.body||"undefined"!=typeof _document.readyState&&"complete"!==_document.readyState))return that._protocols.unshift(protocol),that.protocol="waiting-for-load",utils.attachEvent("load",function(){that._try_next_protocol()}),!0;if(SockJS[protocol]&&SockJS[protocol].enabled(that._options)){var roundTrips=SockJS[protocol].roundTrips||1,to=(that._options.rto||0)*roundTrips||5e3;that._transport_tref=utils.delay(to,function(){that.readyState===SockJS.CONNECTING&&that._didClose(2007,"Transport timeouted")});var connid=utils.random_string(8),trans_url=that._base_url+"/"+that._server+"/"+connid;return that._debug("Opening transport:",protocol," url:"+trans_url," RTO:"+that._options.rto),that._transport=new SockJS[protocol](that,trans_url,that._base_url),!0}that._debug("Skipping transport:",protocol)}},SockJS.prototype.close=function(code,reason){var that=this;if(code&&!utils.userSetCode(code))throw new Error("INVALID_ACCESS_ERR");return that.readyState!==SockJS.CONNECTING&&that.readyState!==SockJS.OPEN?!1:(that.readyState=SockJS.CLOSING,that._didClose(code||1e3,reason||"Normal closure"),!0)},SockJS.prototype.send=function(data){var that=this;if(that.readyState===SockJS.CONNECTING)throw new Error("INVALID_STATE_ERR");return that.readyState===SockJS.OPEN&&that._transport.doSend(utils.quote(""+data)),!0},SockJS.prototype._applyInfo=function(info,rtt,protocols_whitelist){var that=this;that._options.info=info,that._options.rtt=rtt,that._options.rto=utils.countRTO(rtt),that._options.info.null_origin=!_document.domain;var probed=utils.probeProtocols();that._protocols=utils.detectProtocols(probed,protocols_whitelist,info)};var WebSocketTransport=SockJS.websocket=function(ri,trans_url){var that=this,url=trans_url+"/websocket";url="https"===url.slice(0,5)?"wss"+url.slice(5):"ws"+url.slice(4),that.ri=ri,that.url=url;var Constructor=_window.WebSocket||_window.MozWebSocket;that.ws=new Constructor(that.url),that.ws.onmessage=function(e){that.ri._didMessage(e.data)},that.unload_ref=utils.unload_add(function(){that.ws.close()}),that.ws.onclose=function(){that.ri._didMessage(utils.closeFrame(1006,"WebSocket connection broken"))}};WebSocketTransport.prototype.doSend=function(data){this.ws.send("["+data+"]")},WebSocketTransport.prototype.doCleanup=function(){var that=this,ws=that.ws;ws&&(ws.onmessage=ws.onclose=null,ws.close(),utils.unload_del(that.unload_ref),that.unload_ref=that.ri=that.ws=null)},WebSocketTransport.enabled=function(){return!(!_window.WebSocket&&!_window.MozWebSocket)},WebSocketTransport.roundTrips=2;var BufferedSender=function(){};BufferedSender.prototype.send_constructor=function(sender){var that=this;that.send_buffer=[],that.sender=sender},BufferedSender.prototype.doSend=function(message){var that=this;that.send_buffer.push(message),that.send_stop||that.send_schedule()},BufferedSender.prototype.send_schedule_wait=function(){var tref,that=this;that.send_stop=function(){that.send_stop=null,clearTimeout(tref)},tref=utils.delay(25,function(){that.send_stop=null,that.send_schedule()})},BufferedSender.prototype.send_schedule=function(){var that=this;if(that.send_buffer.length>0){var payload="["+that.send_buffer.join(",")+"]";that.send_stop=that.sender(that.trans_url,payload,function(success,abort_reason){that.send_stop=null,success===!1?that.ri._didClose(1006,"Sending error "+abort_reason):that.send_schedule_wait()}),that.send_buffer=[]}},BufferedSender.prototype.send_destructor=function(){var that=this;that._send_stop&&that._send_stop(),that._send_stop=null};var jsonPGenericSender=function(url,payload,callback){var that=this;if(!("_send_form"in that)){var form=that._send_form=_document.createElement("form"),area=that._send_area=_document.createElement("textarea");area.name="d",form.style.display="none",form.style.position="absolute",form.method="POST",form.enctype="application/x-www-form-urlencoded",form.acceptCharset="UTF-8",form.appendChild(area),_document.body.appendChild(form)}var form=that._send_form,area=that._send_area,id="a"+utils.random_string(8);form.target=id,form.action=url+"/jsonp_send?i="+id;var iframe;try{iframe=_document.createElement('<iframe name="'+id+'">')}catch(x){iframe=_document.createElement("iframe"),iframe.name=id}iframe.id=id,form.appendChild(iframe),iframe.style.display="none";try{area.value=payload}catch(e){utils.log("Your browser is seriously broken. Go home! "+e.message)}form.submit();var completed=function(){iframe.onerror&&(iframe.onreadystatechange=iframe.onerror=iframe.onload=null,utils.delay(500,function(){iframe.parentNode.removeChild(iframe),iframe=null}),area.value="",callback(!0))};return iframe.onerror=iframe.onload=completed,iframe.onreadystatechange=function(){"complete"==iframe.readyState&&completed()},completed},createAjaxSender=function(AjaxObject){return function(url,payload,callback){var xo=new AjaxObject("POST",url+"/xhr_send",payload);return xo.onfinish=function(status){callback(200===status||204===status,"http status "+status)},function(abort_reason){callback(!1,abort_reason)}}},jsonPGenericReceiver=function(url,callback){var tref,script2,script=_document.createElement("script"),close_script=function(frame){script2&&(script2.parentNode.removeChild(script2),script2=null),script&&(clearTimeout(tref),script.parentNode.removeChild(script),script.onreadystatechange=script.onerror=script.onload=script.onclick=null,script=null,callback(frame),callback=null)},loaded_okay=!1,error_timer=null;if(script.id="a"+utils.random_string(8),script.src=url,script.type="text/javascript",script.charset="UTF-8",script.onerror=function(){error_timer||(error_timer=setTimeout(function(){loaded_okay||close_script(utils.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1e3))},script.onload=function(){close_script(utils.closeFrame(1006,"JSONP script loaded abnormally (onload)"))},script.onreadystatechange=function(){if(/loaded|closed/.test(script.readyState)){if(script&&script.htmlFor&&script.onclick){loaded_okay=!0;try{script.onclick()}catch(x){}}script&&close_script(utils.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"==typeof script.async&&_document.attachEvent)if(/opera/i.test(navigator.userAgent))script2=_document.createElement("script"),script2.text="try{var a = document.getElementById('"+script.id+"'); if(a)a.onerror();}catch(x){};",script.async=script2.async=!1;else{try{script.htmlFor=script.id,script.event="onclick"}catch(x){}script.async=!0}"undefined"!=typeof script.async&&(script.async=!0),tref=setTimeout(function(){close_script(utils.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35e3);var head=_document.getElementsByTagName("head")[0];return head.insertBefore(script,head.firstChild),script2&&head.insertBefore(script2,head.firstChild),close_script},JsonPTransport=SockJS["jsonp-polling"]=function(ri,trans_url){utils.polluteGlobalNamespace();var that=this;that.ri=ri,that.trans_url=trans_url,that.send_constructor(jsonPGenericSender),that._schedule_recv()};JsonPTransport.prototype=new BufferedSender,JsonPTransport.prototype._schedule_recv=function(){var that=this,callback=function(data){that._recv_stop=null,data&&(that._is_closing||that.ri._didMessage(data)),that._is_closing||that._schedule_recv()};that._recv_stop=jsonPReceiverWrapper(that.trans_url+"/jsonp",jsonPGenericReceiver,callback)},JsonPTransport.enabled=function(){return!0},JsonPTransport.need_body=!0,JsonPTransport.prototype.doCleanup=function(){var that=this;that._is_closing=!0,that._recv_stop&&that._recv_stop(),that.ri=that._recv_stop=null,that.send_destructor()};var jsonPReceiverWrapper=function(url,constructReceiver,user_callback){var id="a"+utils.random_string(6),url_id=url+"?c="+escape(WPrefix+"."+id),aborting=0,callback=function(frame){switch(aborting){case 0:delete _window[WPrefix][id],user_callback(frame);break;case 1:user_callback(frame),aborting=2;break;case 2:delete _window[WPrefix][id]}},close_script=constructReceiver(url_id,callback);_window[WPrefix][id]=close_script;var stop=function(){_window[WPrefix][id]&&(aborting=1,_window[WPrefix][id](utils.closeFrame(1e3,"JSONP user aborted read")))};return stop},AjaxBasedTransport=function(){};AjaxBasedTransport.prototype=new BufferedSender,AjaxBasedTransport.prototype.run=function(ri,trans_url,url_suffix,Receiver,AjaxObject){var that=this;that.ri=ri,that.trans_url=trans_url,that.send_constructor(createAjaxSender(AjaxObject)),that.poll=new Polling(ri,Receiver,trans_url+url_suffix,AjaxObject)},AjaxBasedTransport.prototype.doCleanup=function(){var that=this;that.poll&&(that.poll.abort(),that.poll=null)};var XhrStreamingTransport=SockJS["xhr-streaming"]=function(ri,trans_url){this.run(ri,trans_url,"/xhr_streaming",XhrReceiver,utils.XHRCorsObject)};XhrStreamingTransport.prototype=new AjaxBasedTransport,XhrStreamingTransport.enabled=function(){return _window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)},XhrStreamingTransport.roundTrips=2,XhrStreamingTransport.need_body=!0;var XdrStreamingTransport=SockJS["xdr-streaming"]=function(ri,trans_url){this.run(ri,trans_url,"/xhr_streaming",XhrReceiver,utils.XDRObject)};XdrStreamingTransport.prototype=new AjaxBasedTransport,XdrStreamingTransport.enabled=function(){return!!_window.XDomainRequest},XdrStreamingTransport.roundTrips=2;var XhrPollingTransport=SockJS["xhr-polling"]=function(ri,trans_url){this.run(ri,trans_url,"/xhr",XhrReceiver,utils.XHRCorsObject)};XhrPollingTransport.prototype=new AjaxBasedTransport,XhrPollingTransport.enabled=XhrStreamingTransport.enabled,XhrPollingTransport.roundTrips=2;var XdrPollingTransport=SockJS["xdr-polling"]=function(ri,trans_url){this.run(ri,trans_url,"/xhr",XhrReceiver,utils.XDRObject)};XdrPollingTransport.prototype=new AjaxBasedTransport,XdrPollingTransport.enabled=XdrStreamingTransport.enabled,XdrPollingTransport.roundTrips=2;var IframeTransport=function(){};IframeTransport.prototype.i_constructor=function(ri,trans_url,base_url){var that=this;that.ri=ri,that.origin=utils.getOrigin(base_url),that.base_url=base_url,that.trans_url=trans_url;var iframe_url=base_url+"/iframe.html";that.ri._options.devel&&(iframe_url+="?t="+ +new Date),that.window_id=utils.random_string(8),iframe_url+="#"+that.window_id,that.iframeObj=utils.createIframe(iframe_url,function(r){that.ri._didClose(1006,"Unable to load an iframe ("+r+")")}),that.onmessage_cb=utils.bind(that.onmessage,that),utils.attachMessage(that.onmessage_cb)},IframeTransport.prototype.doCleanup=function(){var that=this;if(that.iframeObj){utils.detachMessage(that.onmessage_cb);try{that.iframeObj.iframe.contentWindow&&that.postMessage("c")}catch(x){}that.iframeObj.cleanup(),that.iframeObj=null,that.onmessage_cb=that.iframeObj=null}},IframeTransport.prototype.onmessage=function(e){var that=this;if(e.origin===that.origin){var window_id=e.data.slice(0,8),type=e.data.slice(8,9),data=e.data.slice(9);if(window_id===that.window_id)switch(type){case"s":that.iframeObj.loaded(),that.postMessage("s",JSON.stringify([SockJS.version,that.protocol,that.trans_url,that.base_url]));break;case"t":that.ri._didMessage(data)}}},IframeTransport.prototype.postMessage=function(type,data){var that=this;that.iframeObj.post(that.window_id+type+(data||""),that.origin)},IframeTransport.prototype.doSend=function(message){this.postMessage("m",message)},IframeTransport.enabled=function(){var konqueror=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"==typeof _window.postMessage||"object"==typeof _window.postMessage)&&!konqueror};var curr_window_id,postMessage=function(type,data){parent!==_window?parent.postMessage(curr_window_id+type+(data||""),"*"):utils.log("Can't postMessage, no parent window.",type,data)},FacadeJS=function(){};FacadeJS.prototype._didClose=function(code,reason){postMessage("t",utils.closeFrame(code,reason))},FacadeJS.prototype._didMessage=function(frame){postMessage("t",frame)},FacadeJS.prototype._doSend=function(data){this._transport.doSend(data)},FacadeJS.prototype._doCleanup=function(){this._transport.doCleanup()},utils.parent_origin=void 0,SockJS.bootstrap_iframe=function(){var facade;curr_window_id=_document.location.hash.slice(1);var onMessage=function(e){if(e.source===parent&&("undefined"==typeof utils.parent_origin&&(utils.parent_origin=e.origin),e.origin===utils.parent_origin)){var window_id=e.data.slice(0,8),type=e.data.slice(8,9),data=e.data.slice(9);if(window_id===curr_window_id)switch(type){case"s":var p=JSON.parse(data),version=p[0],protocol=p[1],trans_url=p[2],base_url=p[3];if(version!==SockJS.version&&utils.log('Incompatibile SockJS! Main site uses: "'+version+'", the iframe: "'+SockJS.version+'".'),!utils.flatUrl(trans_url)||!utils.flatUrl(base_url))return void utils.log("Only basic urls are supported in SockJS");if(!utils.isSameOriginUrl(trans_url)||!utils.isSameOriginUrl(base_url))return void utils.log("Can't connect to different domain from within an iframe. ("+JSON.stringify([_window.location.href,trans_url,base_url])+")");facade=new FacadeJS,facade._transport=new FacadeJS[protocol](facade,trans_url,base_url);break;case"m":facade._doSend(data);break;case"c":facade&&facade._doCleanup(),facade=null}}};utils.attachMessage(onMessage),postMessage("s")};var InfoReceiver=function(base_url,AjaxObject){var that=this;utils.delay(function(){that.doXhr(base_url,AjaxObject)})};InfoReceiver.prototype=new EventEmitter(["finish"]),InfoReceiver.prototype.doXhr=function(base_url,AjaxObject){var that=this,t0=(new Date).getTime(),xo=new AjaxObject("GET",base_url+"/info"),tref=utils.delay(8e3,function(){xo.ontimeout()});xo.onfinish=function(status,text){if(clearTimeout(tref),tref=null,200===status){var rtt=(new Date).getTime()-t0,info=JSON.parse(text);"object"!=typeof info&&(info={}),that.emit("finish",info,rtt)}else that.emit("finish")},xo.ontimeout=function(){xo.close(),that.emit("finish")}};var InfoReceiverIframe=function(base_url){var that=this,go=function(){var ifr=new IframeTransport;ifr.protocol="w-iframe-info-receiver";var fun=function(r){if("string"==typeof r&&"m"===r.substr(0,1)){var d=JSON.parse(r.substr(1)),info=d[0],rtt=d[1];that.emit("finish",info,rtt)}else that.emit("finish");ifr.doCleanup(),ifr=null},mock_ri={_options:{},_didClose:fun,_didMessage:fun};ifr.i_constructor(mock_ri,base_url,base_url)};_document.body?go():utils.attachEvent("load",go)};InfoReceiverIframe.prototype=new EventEmitter(["finish"]);var InfoReceiverFake=function(){var that=this;utils.delay(function(){that.emit("finish",{},2e3)})};InfoReceiverFake.prototype=new EventEmitter(["finish"]);var createInfoReceiver=function(base_url){if(utils.isSameOriginUrl(base_url))return new InfoReceiver(base_url,utils.XHRLocalObject);switch(utils.isXHRCorsCapable()){case 1:return new InfoReceiver(base_url,utils.XHRLocalObject);case 2:return new InfoReceiver(base_url,utils.XDRObject);case 3:return new InfoReceiverIframe(base_url);default:return new InfoReceiverFake}},WInfoReceiverIframe=FacadeJS["w-iframe-info-receiver"]=function(ri,_trans_url,base_url){var ir=new InfoReceiver(base_url,utils.XHRLocalObject);ir.onfinish=function(info,rtt){ri._didMessage("m"+JSON.stringify([info,rtt])),ri._didClose()}};WInfoReceiverIframe.prototype.doCleanup=function(){};var EventSourceIframeTransport=SockJS["iframe-eventsource"]=function(){var that=this;that.protocol="w-iframe-eventsource",that.i_constructor.apply(that,arguments)};EventSourceIframeTransport.prototype=new IframeTransport,EventSourceIframeTransport.enabled=function(){return"EventSource"in _window&&IframeTransport.enabled()},EventSourceIframeTransport.need_body=!0,EventSourceIframeTransport.roundTrips=3;var EventSourceTransport=FacadeJS["w-iframe-eventsource"]=function(ri,trans_url){this.run(ri,trans_url,"/eventsource",EventSourceReceiver,utils.XHRLocalObject)};EventSourceTransport.prototype=new AjaxBasedTransport;var XhrPollingIframeTransport=SockJS["iframe-xhr-polling"]=function(){var that=this;that.protocol="w-iframe-xhr-polling",that.i_constructor.apply(that,arguments)};XhrPollingIframeTransport.prototype=new IframeTransport,XhrPollingIframeTransport.enabled=function(){return _window.XMLHttpRequest&&IframeTransport.enabled()},XhrPollingIframeTransport.need_body=!0,XhrPollingIframeTransport.roundTrips=3;var XhrPollingITransport=FacadeJS["w-iframe-xhr-polling"]=function(ri,trans_url){this.run(ri,trans_url,"/xhr",XhrReceiver,utils.XHRLocalObject)};XhrPollingITransport.prototype=new AjaxBasedTransport;var HtmlFileIframeTransport=SockJS["iframe-htmlfile"]=function(){var that=this;that.protocol="w-iframe-htmlfile",that.i_constructor.apply(that,arguments)};HtmlFileIframeTransport.prototype=new IframeTransport,HtmlFileIframeTransport.enabled=function(){return IframeTransport.enabled()},HtmlFileIframeTransport.need_body=!0,HtmlFileIframeTransport.roundTrips=3;var HtmlFileTransport=FacadeJS["w-iframe-htmlfile"]=function(ri,trans_url){this.run(ri,trans_url,"/htmlfile",HtmlfileReceiver,utils.XHRLocalObject)};HtmlFileTransport.prototype=new AjaxBasedTransport;var Polling=function(ri,Receiver,recv_url,AjaxObject){var that=this;that.ri=ri,that.Receiver=Receiver,that.recv_url=recv_url,that.AjaxObject=AjaxObject,that._scheduleRecv()};Polling.prototype._scheduleRecv=function(){var that=this,poll=that.poll=new that.Receiver(that.recv_url,that.AjaxObject),msg_counter=0;poll.onmessage=function(e){msg_counter+=1,that.ri._didMessage(e.data)},poll.onclose=function(e){that.poll=poll=poll.onmessage=poll.onclose=null,that.poll_is_closing||("permanent"===e.reason?that.ri._didClose(1006,"Polling error ("+e.reason+")"):that._scheduleRecv())}},Polling.prototype.abort=function(){var that=this;that.poll_is_closing=!0,that.poll&&that.poll.abort()};var EventSourceReceiver=function(url){var that=this,es=new EventSource(url);es.onmessage=function(e){that.dispatchEvent(new SimpleEvent("message",{data:unescape(e.data)}))},that.es_close=es.onerror=function(e,abort_reason){var reason=abort_reason?"user":2!==es.readyState?"network":"permanent";that.es_close=es.onmessage=es.onerror=null,es.close(),es=null,utils.delay(200,function(){that.dispatchEvent(new SimpleEvent("close",{reason:reason}))})}};EventSourceReceiver.prototype=new REventTarget,EventSourceReceiver.prototype.abort=function(){var that=this;that.es_close&&that.es_close({},!0)};var _is_ie_htmlfile_capable,isIeHtmlfileCapable=function(){if(void 0===_is_ie_htmlfile_capable)if("ActiveXObject"in _window)try{_is_ie_htmlfile_capable=!!new ActiveXObject("htmlfile")}catch(x){}else _is_ie_htmlfile_capable=!1;return _is_ie_htmlfile_capable},HtmlfileReceiver=function(url){var that=this;utils.polluteGlobalNamespace(),that.id="a"+utils.random_string(6,26),url+=(-1===url.indexOf("?")?"?":"&")+"c="+escape(WPrefix+"."+that.id);var iframeObj,constructor=isIeHtmlfileCapable()?utils.createHtmlfile:utils.createIframe;_window[WPrefix][that.id]={start:function(){iframeObj.loaded()},message:function(data){that.dispatchEvent(new SimpleEvent("message",{data:data}))},stop:function(){that.iframe_close({},"network")}},that.iframe_close=function(e,abort_reason){iframeObj.cleanup(),that.iframe_close=iframeObj=null,delete _window[WPrefix][that.id],that.dispatchEvent(new SimpleEvent("close",{reason:abort_reason}))},iframeObj=constructor(url,function(){that.iframe_close({},"permanent")})};HtmlfileReceiver.prototype=new REventTarget,HtmlfileReceiver.prototype.abort=function(){var that=this;that.iframe_close&&that.iframe_close({},"user")};var XhrReceiver=function(url,AjaxObject){var that=this,buf_pos=0;that.xo=new AjaxObject("POST",url,null),that.xo.onchunk=function(status,text){if(200===status)for(;;){var buf=text.slice(buf_pos),p=buf.indexOf("\n");if(-1===p)break;buf_pos+=p+1;var msg=buf.slice(0,p);that.dispatchEvent(new SimpleEvent("message",{data:msg}))}},that.xo.onfinish=function(status,text){that.xo.onchunk(status,text),that.xo=null;var reason=200===status?"network":"permanent";that.dispatchEvent(new SimpleEvent("close",{reason:reason}))}};return XhrReceiver.prototype=new REventTarget,XhrReceiver.prototype.abort=function(){var that=this;that.xo&&(that.xo.close(),that.dispatchEvent(new SimpleEvent("close",{reason:"user"})),that.xo=null)},SockJS.getUtils=function(){return utils},SockJS.getIframeTransport=function(){return IframeTransport},SockJS}(),"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1),"function"==typeof define&&define.amd&&define("sockjs",[],function(){return SockJS}),$(document).ready(function(){"use strict";$('[data-toggle="offcanvas"]').click(function(){$(".row-offcanvas").toggleClass("active")})}),jQuery(document).ready(function(){"use strict";jQuery.simpleWeather({location:"College Station, TX",woeid:"",unit:"f",success:function(weather){var html;html='<h2><i class="weather-icon-'+weather.code+'"></i> '+weather.temp+"&deg;"+weather.units.temp+"</h2>",html+='<ul><li class="currently">'+weather.currently+"</li>",html+="<li>"+weather.city+", "+weather.region+"</li></ul>",html+="<li>"+weather.wind.direction+" "+weather.wind.speed+" "+weather.units.speed+"</li>",jQuery("#weather").html(html)},error:function(error){jQuery("#weather").html("<p>"+error+"</p>")}})}),function($,document,window,undefined){"use strict";function Plugin(element,options){this.element=element,this.options=$.extend({},defaults,options),this.$el=$(element),this.$el.data(pluginName,this),this._defaults=defaults,this.init()}var pluginName="utilCarousel",defaults={responsiveBaseOn:window,showItems:4,responsive:!0,responsiveMode:"breakPoints",responsiveDelay:200,breakPoints:[[480,1],[768,2],[992,3],[1200,4]],itemWidthRange:[100,400],itemWidthRangeConflict:"margin",rangeCaculate:"maxFirst",autoPlay:!1,pagination:!0,navigation:!1,navigationText:["Prev","Next"],itemLess:"margin",scrollPerPage:!1,interval:3e3,rewind:!0,themeClass:"util-theme-default",pauseOnHover:!0,drag:!0,mouseWheel:!1,slideSpeed:400,responsiveSpeed:400,scrollPageSpeed:600,beforeInit:null,afterInit:null,beforeUpdate:null,afterUpdate:null,indexChanged:null,beforeDrag:null,afterDrag:null,itemAnimation:!1,lazyLoad:!1};Plugin.prototype={init:function(){var base=this;$.isFunction(base.options.beforeInit)&&base.options.beforeInit(),base.getBroswerStatus(),base.initBaseVars(),base.buildWrap(),base.updateUI(!1),base.$wrapper.css("display","block"),base.loadEvents(),base.options.autoPlay===!0&&base.play(),$.isFunction(base.options.afterInit)&&base.options.afterInit(),base.needCheckVisable&&base.checkVisable(0)},getBroswerStatus:function(){var base=this;if(base.isTouch=Modernizr.touch,base.transform3d=Modernizr.csstransforms3d,base.transform2d=Modernizr.csstransforms,base.transition=Modernizr.csstransitions,base.cssanimations=Modernizr.cssanimations,base.transition){var transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};base.transitionName=Modernizr.prefixed("transition"),base.transEndName=transEndEventNames[Modernizr.prefixed("transition")],base.emulateTransitionEnd=function($target,duration){var called=!1;$target.one(base.transEndName,function(){called=!0});var callback=function(){called||$target.trigger(base.transEndName)};window.setTimeout(callback,duration)},base.moveProperty=Modernizr.prefixed("transform"),base.moveValueMarkup=base.transform3d?"translate3d({0}px,0px,0px)":"translate({0}px,0px)"}else base.moveProperty="left",base.moveValueMarkup="{0}px"},initBaseVars:function(){var base=this;window.utilId==undefined&&(window.utilId=0),base.internalId=window.utilId+1,base.$items=base.$el.children(),base.itemTotal=base.$items.size(),base.visiableItemCount=base.options.showItems,base.showIndex=0,base.activeIndex=0,base.itemPad=0,base.pageIndex=-1,base.isSliding=!1,base.dragging=!1,base.playStatus="stop",base.doAnimation=1==base.cssanimations&&0!=base.options.itemAnimation,base.needCheckVisable=base.doAnimation||base.options.lazyLoad,base.options.lazyLoad&&(base.$lazyImages=base.$el.find(".img-lazy[data-src]"))},buildWrap:function(){var base=this;base.originalClass=base.$el.attr("class")||"",""==base.options.themeClass||base.$el.hasClass(base.options.themeClass)||base.$el.attr("class","util-theme-default "+(base.$el.attr("class")||"")),base.$el.hasClass("util-carousel")||base.$el.attr("class","util-carousel "+(base.$el.attr("class")||"")),base.$items.wrapAll('<div class="util-wrapper"></div>').wrap('<div class="util-item"></div>'),base.$utilItems=base.$el.find(".util-item"),base.$wrapper=base.$el.find(".util-wrapper").wrap('<div class="util-wrapper-holder"></div>'),base.$wrapperHolder=base.$el.find(".util-wrapper-holder"),base.$el.css("display","block"),base.options.pagination===!0&&(base.$pagination=$('<div class="util-pagination"></div>').appendTo(base.$el),base.$pagination.on("click.util touchend",".util-page",function(){var pageIndex=$(this).data("utilIndex");base.showIndex!=pageIndex&&base.goTo(pageIndex,base.options.scrollPageSpeed,!0)})),base.options.navigation===!0&&(base.$navigation=$('<div class="util-navigation"></div>').appendTo(base.$el),base.$btnPrev=$('<div class="util-prev">'+base.options.navigationText[0]+"</div>").appendTo(base.$navigation),base.$btnNext=$('<div class="util-next">'+base.options.navigationText[1]+"</div>").appendTo(base.$navigation),base.$btnPrev.on("click.util",function(){base.prev()}),base.$btnNext.on("click.util",function(){base.next()}))},caculateResponsiveItems:function(){var minWidth,maxWidth,base=this,count=1,pad=0,width=$(base.options.responsiveBaseOn).width(),elWidth=base.$wrapperHolder.innerWidth();if(base.holderWidth=elWidth,base.options.responsive){if("itemWidthRange"==base.options.responsiveMode){var minmax;minmax=base.options.itemWidthRange.sort(),minWidth=minmax[0],maxWidth=minmax[1];var maxCount=elWidth/minWidth,minCount=elWidth/maxWidth;"minFirst"===base.options.rangeCaculate?(count=Math.floor(maxCount),count>0?minCount>count&&"ajust"!==base.options.itemWidthRangeConflict&&(pad=elWidth/count-maxWidth):count=1):"maxFirst"===base.options.rangeCaculate&&(count=Math.ceil(minCount),count>maxCount&&(count-=1,count>0?"ajust"!==base.options.itemWidthRangeConflict&&(pad=elWidth/count-maxWidth):count=1))}else{var breakPoints=base.options.breakPoints.sort(function(a,b){return b[0]-a[0]});count=base.options.showItems>breakPoints[0][1]?base.options.showItems:breakPoints[0][1];for(var i=0;i<breakPoints.length&&width<=breakPoints[i][0];i++)count=breakPoints[i][1]}count>base.itemTotal&&("breakPoints"===base.options.responsiveMode&&("margin"===base.options.itemLess?(pad=elWidth/base.itemTotal-elWidth/count,count=base.itemTotal):"scaleUp"===base.options.itemLess&&(count=base.itemTotal)),"itemWidthRange"===base.options.responsiveMode&&("margin"===base.options.itemLess&&("minFirst"===base.options.rangeCaculate&&(minCount>base.itemTotal?(count=base.itemTotal,pad=elWidth/count-maxWidth):(count=base.itemTotal,pad=0)),"maxFirst"===base.options.rangeCaculate&&(count=base.itemTotal,pad=elWidth/count-maxWidth)),"scaleUp"===base.options.itemLess&&(count=base.itemTotal,pad=0)))}else count=base.options.showItems;base.visiableItemCount=count,base.itemPad=pad,base.itemWidth=elWidth/count},caculatePositionArray:function(){var base=this;base.itemPositions=[],base.pagePositions=[],base.userItemPositions=[],base.pageIndexs=[];for(var lastPageIndex=base.itemTotal-base.visiableItemCount,pageNum=0,i=0;i<base.itemTotal;i++)base.itemPositions.push(base.itemWidth*i*-1),base.userItemPositions.push(base.itemPositions[i]-base.itemPad/2),(i%base.visiableItemCount==0&&lastPageIndex>i||i==lastPageIndex)&&(pageNum++,base.pagePositions.push(base.itemPositions[i]),base.pageIndexs.push(i)),base.$utilItems.eq(i).data("page",pageNum)},updatePagination:function(){var base=this;if(base.options.pagination===!0&&(base.$pagination.empty().hide(),base.pagePositions.length>1)){base.$pagination.show();for(var i=0;i<base.pagePositions.length;i++)$('<div class="util-page"><span> </span></div>').data("utilIndex",$.inArray(base.pagePositions[i],base.itemPositions)).appendTo(base.$pagination)}},checkPagination:function(){var base=this,pageIndex=0;if(base.options.pagination===!0){for(var i=0;i<base.pageIndexs.length&&base.showIndex>=base.pageIndexs[i];i++)pageIndex=i;base.$pagination.find(".active-page").removeClass("active-page"),base.$pagination.find(".util-page").eq(pageIndex).addClass("active-page"),base.pageIndex=pageIndex}},checkNavigation:function(){var base=this;base.options.rewind!==!0&&base.options.navigation===!0&&(base.$btnPrev.removeClass("util-disable"),base.$btnNext.removeClass("util-disable"),0==base.showIndex&&(base.$btnPrev.hasClass("util-disable")||base.$btnPrev.addClass("util-disable")),base.showIndex==base.maxTransItems&&(base.$btnNext.hasClass("util-disable")||base.$btnNext.addClass("util-disable")))},maxTrans:function(){var base=this;base.visiableItemCount>base.itemTotal?(base.maxTransLeft=0,base.maxTransItems=0):(base.maxTransLeft=(base.itemTotal-base.visiableItemCount)*base.itemWidth,base.maxTransItems=base.itemTotal-base.visiableItemCount)},updateUI:function(animate){var base=this;$.isFunction(base.options.beforeUpdate)&&base.options.beforeUpdate(),base.caculateResponsiveItems(),base.maxTrans(),base.caculatePositionArray(),base.updatePagination(),base.checkPagination(),base.checkNavigation();var pad=base.itemPad,perWidth=(base.visiableItemCount,base.itemWidth),nowWrapperWidth=base.$wrapper.width(),changeWrapperWidth=perWidth*base.itemTotal*2;if(animate){var callback=function(){};changeWrapperWidth>=nowWrapperWidth?(base.$wrapper.width(changeWrapperWidth),callback=function(){base.goTo(base.showIndex,base.options.slideSpeed,!0)}):callback=function(){base.$wrapper.width(changeWrapperWidth),base.goTo(base.showIndex,base.options.slideSpeed,!0)};var fullWidth;base.transition&&base.$wrapper.css(base.transitionName,""),$.when(base.$utilItems.stop(!0,!1).animate({width:perWidth-pad,marginLeft:pad/2,marginRight:pad/2},{duration:base.options.responsiveSpeed,step:function(now,fv){"width"==fv.prop&&(fullWidth=now),"marginLeft"==fv.prop&&(fullWidth+=2*now,base.moveTo(-base.showIndex*fullWidth))}})).then(function(){$.isFunction(base.options.afterUpdate)&&base.options.afterUpdate(),callback()})}else base.$wrapper.width(changeWrapperWidth),base.$utilItems.css({width:perWidth-pad,marginLeft:pad/2,marginRight:pad/2}),$.isFunction(base.options.afterUpdate)&&base.options.afterUpdate();base.resumePlay()},resizeHandler:function(){var resizeTimer,base=this,lastWinWidth=$(window).width();base.doRezise=function(){$(window).width()!=lastWinWidth&&(window.clearTimeout(resizeTimer),base.clearPlay(),resizeTimer=window.setTimeout(function(){var winWidth=$(window).width();lastWinWidth!=winWidth&&(lastWinWidth=winWidth,base.updateUI(!0))},base.options.responsiveDelay))},base.options.responsive&&$(window).on("resize.util"+base.internalId,base.doRezise)},dragEvents:function(){var startPosition,scrollY,dragTarget,base=this,hammerObj=base.$wrapperHolder.hammer({drag_min_distance:1});hammerObj.on("dragstart",function(){scrollY=undefined}).on("drag",function(ev){if(base.dragging){if("undefined"==typeof scrollY&&(scrollY=!!(scrollY||Math.abs(ev.gesture.deltaX)<Math.abs(ev.gesture.deltaY))),!scrollY&&"touch"==ev.gesture.pointerType||"mouse"==ev.gesture.pointerType){ev.gesture.preventDefault();var newPosX,overRate=.6;newPosX=startPosition.left>0||startPosition.left<-base.maxTransLeft?ev.gesture.deltaX*overRate+startPosition.left:ev.gesture.deltaX+startPosition.left,newPosX<-base.maxTransLeft&&(newPosX=startPosition.left<-base.maxTransLeft?startPosition.left+ev.gesture.deltaX*overRate:-base.maxTransLeft+(newPosX- -base.maxTransLeft)*overRate),newPosX>0&&(startPosition.left>0?newPosX=startPosition.left+ev.gesture.deltaX*overRate:newPosX*=overRate),base.dragEndX=newPosX,base.moveTo(newPosX)
}}else"undefined"==typeof scrollY&&(scrollY=!!(scrollY||Math.abs(ev.gesture.deltaX)<Math.abs(ev.gesture.deltaY)),scrollY||ev.gesture.preventDefault()),$.isFunction(base.options.beforeDrag)&&base.options.beforeDrag(),base.clearPlay(),base.dragging=!0,startPosition=base.$wrapper.position(),base.transition?base.$wrapper.css(base.transitionName,""):base.$wrapper.stop(),base.isTouch||(base.$wrapperHolder.addClass("dragging"),base.$wrapperHolder.css("cursor",base.$wrapperHolder.css("cursor"))),dragTarget=ev.target||ev.srcElement}).on("dragend",function(ev){var dragendTarget=ev.target||ev.srcElement;if($(dragTarget).is($(dragendTarget))&&!base.isTouch){$(dragTarget).on("click.util-disableclick",function(evt){return evt.stopImmediatePropagation(),evt.stopPropagation(),evt.preventDefault(),$(dragTarget).off("click.util-disableclick"),!1});var eventList=$._data(dragTarget,"events");eventList.click.unshift(eventList.click.pop())}if(ev.gesture.preventDefault(),"touch"!=ev.gesture.pointerType||!scrollY){ev.gesture.preventDefault(),base.dragging=!1;var goIndex,posArray=base.options.scrollPerPage===!0?base.pagePositions:base.itemPositions;if(base.dragEndX<-base.maxTransLeft)goIndex=base.itemPositions.length-1;else if(base.dragEndX>0)goIndex=0;else{var nextRate=.1,nextRateWidth=nextRate*base.itemWidth;$.each(posArray,function(index,value){var biger=posArray[index-1]===undefined?Number.MAX_VALUE:posArray[index-1],smaller=posArray[index+1]===undefined?-Number.MAX_VALUE:posArray[index+1];ev.gesture.deltaX<0&&base.dragEndX>=value-nextRateWidth&&base.dragEndX<biger-nextRateWidth&&(goIndex=base.options.scrollPerPage===!0?$.inArray(value,base.itemPositions):index),ev.gesture.deltaX>0&&base.dragEndX>=smaller+nextRateWidth&&base.dragEndX<=value+nextRateWidth&&(goIndex=base.options.scrollPerPage===!0?$.inArray(value,base.itemPositions):index)})}base.isTouch||(base.$wrapperHolder.removeClass("dragging"),base.$wrapperHolder.css("cursor","")),$.isFunction(base.options.afterDrag)&&base.options.afterDrag(),base.goTo(goIndex,base.options.slideSpeed,!0)}})},swapEvents:function(){var base=this,hammerObj=Hammer(base.$wrapperHolder.get(0),{swipe_velocity:.1});hammerObj.on("swipeleft swiperight",function(ev){ev.gesture.preventDefault(),"dragleft"!=ev.type&&"dragright"!=ev.type&&("swipeleft"==ev.type?base.next():base.prev())})},loadEvents:function(){var base=this;base.options.responsive===!0&&base.resizeHandler(),base.options.drag===!0?base.dragEvents():base.swapEvents(),base.options.pauseOnHover===!0&&base.isTouch!==!0&&base.pauseOnHover(),base.options.mouseWheel===!0&&base.$el.on("mousewheel.util",function(evt){evt.stopPropagation(),evt.preventDefault(),evt.deltaY<0&&base.next(),evt.deltaY>0&&base.prev()}),base.options.lazyLoad===!0&&base.lazyLoadImage()},moveTo:function(value){var base=this,style={};style[base.moveProperty]=base.moveValueMarkup.replace("{0}",value),base.$wrapper.css(style),base.needCheckVisable&&base.checkVisable(value)},slideTo:function(value,speed){var base=this;base.transition?(base.isSliding=!0,base.$wrapper.css(base.transitionName,"all "+speed+"ms cubic-bezier(0.215, 0.61, 0.355, 1)"),base.moveTo(value),base.$wrapper.one(base.transEndName,function(){base.isSliding=!1}),base.emulateTransitionEnd(base.$wrapper,speed+50)):base.$wrapper.stop().animate({left:value},speed,function(){base.isSliding=!1})},goTo:function(index,speed,animate){var base=this;speed===undefined&&(speed=base.options.slideSpeed),animate===undefined&&(animate=!0),0>index&&(index=0),index>base.maxTransItems&&(index=base.maxTransItems),animate===!0?(base.slideTo(Math.round(base.itemPositions[index]),speed),base.needCheckVisable&&base.checkVisable(base.itemPositions[index])):(base.transition&&base.$wrapper.css(base.transitionName,""),base.moveTo(Math.round(base.itemPositions[index]))),index!=base.showIndex&&$.isFunction(base.options.indexChanged)&&base.options.indexChanged(index),base.showIndex=index,base.afterGo()},toStart:function(){var base=this;base.goTo(0)},toEnd:function(){var base=this;base.goTo(base.maxTransItems)},afterGo:function(){var base=this;base.checkPagination(),base.checkNavigation(),base.resumePlay()},prev:function(){var prevIndex,base=this;if(base.options.scrollPerPage===!0){if(prevIndex=base.pageIndex-1,base.options.rewind===!0&&0>prevIndex)prevIndex=base.pageIndexs.length-1;else if(base.options.rewind!==!0&&0>prevIndex)return!1;base.goTo(base.pageIndexs[prevIndex],base.options.slideSpeed,!0)}else{if(prevIndex=base.showIndex-1,base.options.rewind===!0&&0>prevIndex)prevIndex=base.maxTransItems;else if(base.options.rewind!==!0&&0>prevIndex)return!1;base.goTo(prevIndex,base.options.slideSpeed,!0)}},next:function(){var nextIndex,base=this;if(base.options.scrollPerPage===!0){if(nextIndex=base.pageIndex+1,base.options.rewind===!0&&nextIndex>base.pageIndexs.length-1)nextIndex=0;else if(base.options.rewind!==!0&&nextIndex>base.pageIndexs.length-1)return!1;base.goTo(base.pageIndexs[nextIndex],base.options.slideSpeed,!0)}else{if(nextIndex=base.showIndex+1,base.options.rewind===!0&&nextIndex>base.maxTransItems)nextIndex=0;else if(base.options.rewind!==!0&&nextIndex>base.maxTransItems)return!1;base.goTo(nextIndex,base.options.slideSpeed,!0)}},play:function(){var base=this;base.playStatus="play",window.clearInterval(base.playTimer),base.playTimer=window.setInterval(function(){base.next()},base.options.interval)},stop:function(){var base=this;base.playStatus="stop",window.clearInterval(base.playTimer)},resumePlay:function(){var base=this;"stop"!==base.playStatus&&base.play()},clearPlay:function(){var base=this;window.clearInterval(base.playTimer)},pauseOnHover:function(){var base=this;base.$el.on("mouseenter.util",function(){base.playStatusBeforHover=base.playStatus,"play"===base.playStatus&&base.stop()}),base.$el.on("mouseleave.util",function(){"play"===base.playStatusBeforHover&&(base.dragging===!0?base.playStatus="play":base.play())})},destroy:function(){var base=this;base.$pagination&&base.$pagination.remove(),base.$navigation&&base.$navigation.remove(),base.$items.unwrap().unwrap().unwrap(),$(window).off("resize.util"+base.internalId),base.$el.attr("class",base.originalClass).removeData("utilCarousel")},checkVisable:function(x){for(var base=this,itemRealWidth=base.itemWidth-base.itemPad,inview=[],i=0;i<base.userItemPositions.length;i++)(base.userItemPositions[i]>x-base.holderWidth&&base.userItemPositions[i]<=x||base.userItemPositions[i]-itemRealWidth>=x-base.holderWidth&&base.userItemPositions[i]-itemRealWidth<x)&&inview.push(i);var $inviewItems=base.$items.filter(function(index){return $.inArray(index,inview)>=0});if(base.doAnimation&&($inviewItems.addClass(base.options.itemAnimation),base.$items.not($inviewItems).removeClass(base.options.itemAnimation)),base.options.lazyLoad){var $loaded=$inviewItems.find(base.$lazyImages).trigger("utillazy");base.$lazyImages=base.$lazyImages.not($loaded)}},lazyLoadImage:function(){var base=this;base.$lazyImages.one("utillazy",function(){var src=this.getAttribute("data-src");this.setAttribute("src",src),this.removeAttribute("data-src")})}},$.fn[pluginName]=function(options){return this.each(function(){$.data(this,pluginName)||$.data(this,pluginName,new Plugin(this,options))})}}(jQuery,document,window),jQuery(function(){jQuery.fn.magnificPopup&&window.setTimeout(function(){jQuery(".util-carousel").each(function(){jQuery(this).magnificPopup({delegate:".img-link",type:"image",gallery:{enabled:!0}})}),jQuery(".video-link").magnificPopup({type:"iframe"})},200)}),window.Modernizr=function(a,b,c){function y(a){i.cssText=a}function A(a,b){return typeof a===b}function B(a,b){return!!~(""+a).indexOf(b)}function C(a,b){for(var d in a){var e=a[d];if(!B(e,"-")&&i[e]!==c)return"pfx"==b?e:!0}return!1}function D(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:A(f,"function")?f.bind(d||b):f}return!1}function E(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+n.join(d+" ")+d).split(" ");return A(b,"string")||A(b,"undefined")?C(e,b):(e=(a+" "+o.join(d+" ")+d).split(" "),D(e,b,c))}var j,u,x,d="2.7.2",e={},f=b.documentElement,g="modernizr",h=b.createElement(g),i=h.style,l=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),m="Webkit Moz O ms",n=m.split(" "),o=m.toLowerCase().split(" "),p={},s=[],t=s.slice,v=function(a,c,d,e){var h,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))for(;d--;)j=b.createElement("div"),j.id=e?e[d]:g+(d+1),l.appendChild(j);return h=["&#173;",'<style id="s',g,'">',a,"</style>"].join(""),l.id=g,(m?l:n).innerHTML+=h,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=f.style.overflow,f.style.overflow="hidden",f.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),f.style.overflow=k),!!i},w={}.hasOwnProperty;x=A(w,"undefined")||A(w.call,"undefined")?function(a,b){return b in a&&A(a.constructor.prototype[b],"undefined")}:function(a,b){return w.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if("function"!=typeof c)throw new TypeError;var d=t.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(t.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(t.call(arguments)))};return e}),p.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:v(["@media (",l.join("touch-enabled),("),g,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=9===a.offsetTop}),c},p.cssanimations=function(){return E("animationName")},p.csstransforms=function(){return!!E("transform")},p.csstransforms3d=function(){var a=!!E("perspective");return a&&"webkitPerspective"in f.style&&v("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b){a=9===b.offsetLeft&&3===b.offsetHeight}),a},p.csstransitions=function(){return E("transition")};for(var F in p)x(p,F)&&(u=F.toLowerCase(),e[u]=p[F](),s.push((e[u]?"":"no-")+u));return e.addTest=function(a,b){if("object"==typeof a)for(var d in a)x(a,d)&&e.addTest(d,a[d]);else{if(a=a.toLowerCase(),e[a]!==c)return e;b="function"==typeof b?b():b,"undefined"!=typeof enableClasses&&enableClasses&&(f.className+=" "+(b?"":"no-")+a),e[a]=b}return e},y(""),h=j=null,e._version=d,e._prefixes=l,e._domPrefixes=o,e._cssomPrefixes=n,e.testProp=function(a){return C([a])},e.testAllProps=E,e.testStyles=v,e.prefixed=function(a,b,c){return b?E(a,b,c):E(a,"pfx")},e}(this,this.document),!function(a,b){"use strict";function c(){e.READY||(t.determineEventTypes(),p.each(e.gestures,function(a){v.register(a)}),t.onTouch(e.DOCUMENT,n,v.detect),t.onTouch(e.DOCUMENT,o,v.detect),e.READY=!0)}function d(a,c){Date.now||(Date.now=function(){return(new Date).getTime()}),a.event.bindDom=function(d,e,f){c(d).on(e,function(c){var d=c.originalEvent||c,e=["pageX","pageY","clientX","clientY","target","preventDefault","stopPropagation"];a.utils.each(e,function(a){null==d[a]&&(d[a]=c[a])}),d.which===b&&(d.which=d.button),f.call(this,d)})},a.utils.each(["on","off"],function(b){a.Instance.prototype[b]=function(a,d){return c(this.element)[b](a,d)}}),a.Instance.prototype.trigger=function(a,b){var d=c(this.element);return d.has(b.target).length&&(d=c(b.target)),d.trigger({type:a,gesture:b})},c.fn.hammer=function(b){return this.each(function(){var d=c(this),e=d.data("hammer");e?e&&b&&a.utils.extend(e.options,b):d.data("hammer",new a(this,b||{}))})}}var e=function(a,b){return new e.Instance(a,b||{})};e.VERSION="1.0.10",e.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},e.HAS_POINTEREVENTS=a.navigator.pointerEnabled||a.navigator.msPointerEnabled,e.HAS_TOUCHEVENTS="ontouchstart"in a,e.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android|silk/i,e.NO_MOUSEEVENTS=e.HAS_TOUCHEVENTS&&a.navigator.userAgent.match(e.MOBILE_REGEX),e.EVENT_TYPES={},e.UPDATE_VELOCITY_INTERVAL=16,e.DOCUMENT=a.document;var f=e.DIRECTION_DOWN="down",g=e.DIRECTION_LEFT="left",h=e.DIRECTION_UP="up",i=e.DIRECTION_RIGHT="right",j=e.POINTER_MOUSE="mouse",k=e.POINTER_TOUCH="touch",l=e.POINTER_PEN="pen",m=e.EVENT_START="start",n=e.EVENT_MOVE="move",o=e.EVENT_END="end";e.plugins=e.plugins||{},e.gestures=e.gestures||{},e.READY=!1;var p=e.utils={extend:function(a,c,d){for(var e in c)a[e]!==b&&d||(a[e]=c[e]);return a},each:function(a,c,d){var e,f;if("forEach"in a)a.forEach(c,d);else if(a.length!==b){for(e=-1;f=a[++e];)if(c.call(d,f,e,a)===!1)return}else for(e in a)if(a.hasOwnProperty(e)&&c.call(d,a[e],e,a)===!1)return},inStr:function(a,b){return a.indexOf(b)>-1},hasParent:function(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1},getCenter:function(a){var b=[],c=[],d=[],e=[],f=Math.min,g=Math.max;return 1===a.length?{pageX:a[0].pageX,pageY:a[0].pageY,clientX:a[0].clientX,clientY:a[0].clientY}:(p.each(a,function(a){b.push(a.pageX),c.push(a.pageY),d.push(a.clientX),e.push(a.clientY)}),{pageX:(f.apply(Math,b)+g.apply(Math,b))/2,pageY:(f.apply(Math,c)+g.apply(Math,c))/2,clientX:(f.apply(Math,d)+g.apply(Math,d))/2,clientY:(f.apply(Math,e)+g.apply(Math,e))/2})},getVelocity:function(a,b,c){return{x:Math.abs(b/a)||0,y:Math.abs(c/a)||0}},getAngle:function(a,b){var c=b.clientX-a.clientX,d=b.clientY-a.clientY;return 180*Math.atan2(d,c)/Math.PI},getDirection:function(a,b){var c=Math.abs(a.clientX-b.clientX),d=Math.abs(a.clientY-b.clientY);return c>=d?a.clientX-b.clientX>0?g:i:a.clientY-b.clientY>0?h:f},getDistance:function(a,b){var c=b.clientX-a.clientX,d=b.clientY-a.clientY;return Math.sqrt(c*c+d*d)},getScale:function(a,b){return a.length>=2&&b.length>=2?this.getDistance(b[0],b[1])/this.getDistance(a[0],a[1]):1},getRotation:function(a,b){return a.length>=2&&b.length>=2?this.getAngle(b[1],b[0])-this.getAngle(a[1],a[0]):0},isVertical:function(a){return a==h||a==f},toggleDefaultBehavior:function(a,b,c){if(b&&a&&a.style){p.each(["webkit","moz","Moz","ms","o",""],function(d){p.each(b,function(b,e){d&&(e=d+e.substring(0,1).toUpperCase()+e.substring(1)),e in a.style&&(a.style[e]=!c&&b)})});var d=function(){return!1};"none"==b.userSelect&&(a.onselectstart=!c&&d),"none"==b.userDrag&&(a.ondragstart=!c&&d)}}};e.Instance=function(a,b){var d=this;return c(),this.element=a,this.enabled=!0,this.options=p.extend(p.extend({},e.defaults),b||{}),this.options.stop_browser_behavior&&p.toggleDefaultBehavior(this.element,this.options.stop_browser_behavior,!1),this.eventStartHandler=t.onTouch(a,m,function(a){d.enabled&&v.startDetect(d,a)}),this.eventHandlers=[],this},e.Instance.prototype={on:function(a,b){var c=a.split(" ");return p.each(c,function(a){this.element.addEventListener(a,b,!1),this.eventHandlers.push({gesture:a,handler:b})},this),this},off:function(a,b){var c,d,e=a.split(" ");return p.each(e,function(a){for(this.element.removeEventListener(a,b,!1),c=-1;d=this.eventHandlers[++c];)d.gesture===a&&d.handler===b&&this.eventHandlers.splice(c,1)},this),this},trigger:function(a,b){b||(b={});var c=e.DOCUMENT.createEvent("Event");c.initEvent(a,!0,!0),c.gesture=b;var d=this.element;return p.hasParent(b.target,d)&&(d=b.target),d.dispatchEvent(c),this},enable:function(a){return this.enabled=a,this},dispose:function(){var a,b;for(this.options.stop_browser_behavior&&p.toggleDefaultBehavior(this.element,this.options.stop_browser_behavior,!0),a=-1;b=this.eventHandlers[++a];)this.element.removeEventListener(b.gesture,b.handler,!1);return this.eventHandlers=[],t.unbindDom(this.element,e.EVENT_TYPES[m],this.eventStartHandler),null}};var q=null,r=!1,s=!1,t=e.event={bindDom:function(a,b,c){var d=b.split(" ");p.each(d,function(b){a.addEventListener(b,c,!1)})},unbindDom:function(a,b,c){var d=b.split(" ");p.each(d,function(b){a.removeEventListener(b,c,!1)})},onTouch:function(a,b,c){var d=this,f=function(f){var g=f.type.toLowerCase();if(!p.inStr(g,"mouse")||!s){p.inStr(g,"touch")||p.inStr(g,"pointerdown")||p.inStr(g,"mouse")&&1===f.which?r=!0:p.inStr(g,"mouse")&&!f.which&&(r=!1),(p.inStr(g,"touch")||p.inStr(g,"pointer"))&&(s=!0);var h=0;r&&(e.HAS_POINTEREVENTS&&b!=o?h=u.updatePointer(b,f):p.inStr(g,"touch")?h=f.touches.length:s||(h=p.inStr(g,"up")?0:1),h>0&&b==o?b=n:h||(b=o),(h||null===q)&&(q=f),c.call(v,d.collectEventData(a,b,d.getTouchList(q,b),f)),e.HAS_POINTEREVENTS&&b==o&&(h=u.updatePointer(b,f))),h||(q=null,r=!1,s=!1,u.reset())}};return this.bindDom(a,e.EVENT_TYPES[b],f),f},determineEventTypes:function(){var a;a=e.HAS_POINTEREVENTS?u.getEvents():e.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],e.EVENT_TYPES[m]=a[0],e.EVENT_TYPES[n]=a[1],e.EVENT_TYPES[o]=a[2]},getTouchList:function(a){return e.HAS_POINTEREVENTS?u.getTouchList():a.touches?a.touches:(a.identifier=1,[a])},collectEventData:function(a,b,c,d){var e=k;return(p.inStr(d.type,"mouse")||u.matchType(j,d))&&(e=j),{center:p.getCenter(c),timeStamp:Date.now(),target:d.target,touches:c,eventType:b,pointerType:e,srcEvent:d,preventDefault:function(){var a=this.srcEvent;a.preventManipulation&&a.preventManipulation(),a.preventDefault&&a.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return v.stopDetect()}}}},u=e.PointerEvent={pointers:{},getTouchList:function(){var a=[];return p.each(this.pointers,function(b){a.push(b)}),a},updatePointer:function(a,b){return a==o?delete this.pointers[b.pointerId]:(b.identifier=b.pointerId,this.pointers[b.pointerId]=b),Object.keys(this.pointers).length},matchType:function(a,b){if(!b.pointerType)return!1;var c=b.pointerType,d={};return d[j]=c===j,d[k]=c===k,d[l]=c===l,d[a]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},v=e.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(a,b){this.current||(this.stopped=!1,this.current={inst:a,startEvent:p.extend({},b),lastEvent:!1,lastVelocityEvent:!1,velocity:!1,name:""},this.detect(b))},detect:function(a){if(this.current&&!this.stopped){a=this.extendEventData(a);var b=this.current.inst,c=b.options;return p.each(this.gestures,function(d){return this.stopped||c[d.name]===!1||b.enabled===!1||d.handler.call(d,a,b)!==!1?void 0:(this.stopDetect(),!1)},this),this.current&&(this.current.lastEvent=a),a.eventType==o&&!a.touches.length-1&&this.stopDetect(),a}},stopDetect:function(){this.previous=p.extend({},this.current),this.current=null,this.stopped=!0},getVelocityData:function(a,b,c,d){var f=this.current,g=f.lastVelocityEvent,h=f.velocity;g&&a.timeStamp-g.timeStamp>e.UPDATE_VELOCITY_INTERVAL?(h=p.getVelocity(a.timeStamp-g.timeStamp,a.center.clientX-g.center.clientX,a.center.clientY-g.center.clientY),f.lastVelocityEvent=a):f.velocity||(h=p.getVelocity(b,c,d),f.lastVelocityEvent=a),f.velocity=h,a.velocityX=h.x,a.velocityY=h.y},getInterimData:function(a){var b,c,d=this.current.lastEvent;a.eventType==o?(b=d&&d.interimAngle,c=d&&d.interimDirection):(b=d&&p.getAngle(d.center,a.center),c=d&&p.getDirection(d.center,a.center)),a.interimAngle=b,a.interimDirection=c},extendEventData:function(a){var b=this.current,c=b.startEvent;(a.touches.length!=c.touches.length||a.touches===c.touches)&&(c.touches=[],p.each(a.touches,function(a){c.touches.push(p.extend({},a))}));var d=a.timeStamp-c.timeStamp,e=a.center.clientX-c.center.clientX,f=a.center.clientY-c.center.clientY;return this.getVelocityData(a,d,e,f),this.getInterimData(a),p.extend(a,{startEvent:c,deltaTime:d,deltaX:e,deltaY:f,distance:p.getDistance(c.center,a.center),angle:p.getAngle(c.center,a.center),direction:p.getDirection(c.center,a.center),scale:p.getScale(c.touches,a.touches),rotation:p.getRotation(c.touches,a.touches)}),a},register:function(a){var c=a.defaults||{};return c[a.name]===b&&(c[a.name]=!0),p.extend(e.defaults,c,!0),a.index=a.index||1e3,this.gestures.push(a),this.gestures.sort(function(a,b){return a.index<b.index?-1:a.index>b.index?1:0}),this.gestures}};e.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,correct_for_drag_min_distance:!0,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(a,b){var c=v.current;if(c.name!=this.name&&this.triggered)return b.trigger(this.name+"end",a),void(this.triggered=!1);if(!(b.options.drag_max_touches>0&&a.touches.length>b.options.drag_max_touches))switch(a.eventType){case m:this.triggered=!1;break;case n:if(a.distance<b.options.drag_min_distance&&c.name!=this.name)return;var d=c.startEvent.center;if(c.name!=this.name&&(c.name=this.name,b.options.correct_for_drag_min_distance&&a.distance>0)){var e=Math.abs(b.options.drag_min_distance/a.distance);d.pageX+=a.deltaX*e,d.pageY+=a.deltaY*e,d.clientX+=a.deltaX*e,d.clientY+=a.deltaY*e,a=v.extendEventData(a)}(c.lastEvent.drag_locked_to_axis||b.options.drag_lock_to_axis&&b.options.drag_lock_min_distance<=a.distance)&&(a.drag_locked_to_axis=!0);var j=c.lastEvent.direction;a.drag_locked_to_axis&&j!==a.direction&&(a.direction=p.isVertical(j)?a.deltaY<0?h:f:a.deltaX<0?g:i),this.triggered||(b.trigger(this.name+"start",a),this.triggered=!0),b.trigger(this.name,a),b.trigger(this.name+a.direction,a);var k=p.isVertical(a.direction);(b.options.drag_block_vertical&&k||b.options.drag_block_horizontal&&!k)&&a.preventDefault();break;case o:this.triggered&&b.trigger(this.name+"end",a),this.triggered=!1}}},e.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:2},timer:null,handler:function(a,b){switch(a.eventType){case m:clearTimeout(this.timer),v.current.name=this.name,this.timer=setTimeout(function(){"hold"==v.current.name&&b.trigger("hold",a)},b.options.hold_timeout);break;case n:a.distance>b.options.hold_threshold&&clearTimeout(this.timer);break;case o:clearTimeout(this.timer)}}},e.gestures.Release={name:"release",index:1/0,handler:function(a,b){a.eventType==o&&b.trigger(this.name,a)}},e.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_min_touches:1,swipe_max_touches:1,swipe_velocity:.7},handler:function(a,b){if(a.eventType==o){if(a.touches.length<b.options.swipe_min_touches||a.touches.length>b.options.swipe_max_touches)return;(a.velocityX>b.options.swipe_velocity||a.velocityY>b.options.swipe_velocity)&&(b.trigger(this.name,a),b.trigger(this.name+a.direction,a))}}},e.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},has_moved:!1,handler:function(a,b){var c,d,e;a.eventType==m?this.has_moved=!1:a.eventType!=n||this.moved?a.eventType==o&&"touchcancel"!=a.srcEvent.type&&a.deltaTime<b.options.tap_max_touchtime&&!this.has_moved&&(c=v.previous,d=c&&c.lastEvent&&a.timeStamp-c.lastEvent.timeStamp,e=!1,c&&"tap"==c.name&&d&&d<b.options.doubletap_interval&&a.distance<b.options.doubletap_distance&&(b.trigger("doubletap",a),e=!0),(!e||b.options.tap_always)&&(v.current.name="tap",b.trigger(v.current.name,a))):this.has_moved=a.distance>b.options.tap_max_distance}},e.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(a,b){return b.options.prevent_mouseevents&&a.pointerType==j?void a.stopDetect():(b.options.prevent_default&&a.preventDefault(),void(a.eventType==m&&b.trigger(this.name,a)))}},e.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1,transform_within_instance:!1},triggered:!1,handler:function(a,b){if(v.current.name!=this.name&&this.triggered)return b.trigger(this.name+"end",a),void(this.triggered=!1);if(!(a.touches.length<2)){if(b.options.transform_always_block&&a.preventDefault(),b.options.transform_within_instance)for(var c=-1;a.touches[++c];)if(!p.hasParent(a.touches[c].target,b.element))return;switch(a.eventType){case m:this.triggered=!1;break;case n:var d=Math.abs(1-a.scale),e=Math.abs(a.rotation);if(d<b.options.transform_min_scale&&e<b.options.transform_min_rotation)return;v.current.name=this.name,this.triggered||(b.trigger(this.name+"start",a),this.triggered=!0),b.trigger(this.name,a),e>b.options.transform_min_rotation&&b.trigger("rotate",a),d>b.options.transform_min_scale&&(b.trigger("pinch",a),b.trigger("pinch"+(a.scale<1?"in":"out"),a));break;case o:this.triggered&&b.trigger(this.name+"end",a),this.triggered=!1}}}},a.Hammer=e,"object"==typeof module&&module.exports&&(module.exports=e),"function"==typeof define&&define.amd?define(["jquery"],function(b){return d(a.Hammer,b)}):d(a.Hammer,a.jQuery||a.Zepto)}(window),!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.11",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b)["offsetParent"in a.fn?"offsetParent":"parent"]();return c.length||(c=a("body")),parseInt(c.css("fontSize"),10)},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})});